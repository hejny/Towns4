<?php/* Towns4Admin, www.towns.cz    © Pavel Hejný | 2011-2014   _____________________________   admin/...   Towns4Admin - Nástroje pro správu Towns*///==============================?><h3>SQL Struktura</h3>Tato funkce slouží k převedení sql struktury do šamlon pro funkce sql_insert a sql_insert_select.<br/><b>    <a href="?page=phpgen_sql&amp;start=sql_insert">sql_insert</a><br/>    <a href="?page=phpgen_sql&amp;start=sql_reinsert">sql_reinsert</a><br/>    <a href="?page=phpgen_sql&amp;start=sql_update">sql_update</a></b><?php$create_sql=create_sql();$newmd5=md5($create_sql);$lastsqlfile=tmpfile2('create.sql','md5','sql');//------------------------------------------------------------------------Spustitif($_GET['start']){    $code='';    //------------------------------------Zjištění tabulek    $tables=sql_array('SHOW FULL TABLES');        foreach($tables as $table){        list($table,$table_type)=$table;                if($table_type=='BASE TABLE'){            $code.=nln.nln;//.'//-------------------------'.$table.nln.nln;            if($_GET['start']=='sql_insert') {                //------------------------------------sql_insert                $code .= '//------------------INSERT ' . sql_remove_mpx($table);                $code .= nln . 'sql_insert(\'' . sql_remove_mpx($table)."',array(";                $columns = sql_array("SHOW COLUMNS FROM `$table`");                $separator = '';                foreach ($columns as $column) {                    $column = $column[0];                    $code .= $separator . nln . "    '$column' => ''";                    $separator = ',';                }                $code .= nln . '));';                $code .= nln . '//------------------';                //------------------------------------            }elseif($_GET['start']=='sql_reinsert'){                //------------------------------------sql_reinsert                $code .= '//------------------REINSERT ' . sql_remove_mpx($table);                $code .= nln . "sql_reinsert('" . sql_remove_mpx($table) . "',\"id='\$id'\",array(";                $columns = sql_array("SHOW COLUMNS FROM `$table`");                $separator = '';                foreach ($columns as $column) {                    $column = $column[0];                    $code .= $separator . nln . "    '$column' => true";                    $separator = ',';                }                $code .= nln . '));';                $code .= nln . '//------------------';                //------------------------------------            }elseif($_GET['start']=='sql_update'){                //------------------------------------sql_reinsert                $code .= '//------------------UPDATE ' . sql_remove_mpx($table);                $code .= nln . "sql_update('" . sql_remove_mpx($table) . "',\"id='\$id'\",array(";                $columns = sql_array("SHOW COLUMNS FROM `$table`");                $separator = '';                foreach ($columns as $column) {                    $column = $column[0];                    $code .= $separator . nln . "    '$column' => ''";                    $separator = ',';                }                $code .= nln . '));';                $code .= nln . '//------------------';                //------------------------------------            }        }    }    highlight_string($code);}//------------------------------------------------------------------------?>